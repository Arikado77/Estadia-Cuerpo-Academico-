<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="CA.css">
    <title>Cuerpo Académico - CA-TICO</title>
</head>

<body>

    <nav>
        <div class="brand">
            <img src="img/Gemini_Generated_Image_6fk5kt6fk5kt6fk5.png" alt="Logo">
            <a class="logo">CA-TICO</a>
        </div>
        <div class="links">
            <a href="#">Inicio</a>
            <a href="#que-es" onclick="window.location.href='CA.html'">¿Qué es CA?</a>
            <a href="#lineas" onclick="window.location.href='Conocimiento.html'">Líneas de Conocimiento</a>
            <a href="#noticias" onclick="window.location.href='Noticias.html'">Noticias y mas</a>
            <a href="#Sitios" onclick="window.location.href='Sitios.html'">Proyectos</a>
        </div>
        <div class="nav-bar">
            <div id="auth-link">
                <a href="login.html" class="login-button">Iniciar Sesión</a>
            </div>
        </div>
    </nav>

    <header>
        <div class="left">
            <h1>Bienvenido a <span><br>TECNOLOGÍAS INMERSIVAS Y CREATIVIDAD PARA LA OPTIMIZACIÓN</span></h1>
            <p>Un espacio de investigación, colaboración y difusión del conocimiento.<br>Explora nuestras líneas de investigación, proyectos y noticias.</p>
        </div>
        <img src="img/Gemini_Generated_Image_6fk5kt6fk5kt6fk5.png" alt="Cuerpo Académico">
    </header>

    <section id="members-container" class="section bg-light">
        <div class="container">
            <h2>Miembros</h2>
            <div class="members-grid">
                
                <div class="member-card">
                    <img src="img/Dynhora.png" alt="Foto de Miembro">
                    <div class="member-name-link">
                        <h3>Dr. Dynhora Danheyda Ramírez Ochoa</h3>
                    </div>
                    <div class="member-details">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google'></i> Perfil Google: <a href="https://scholar.google.com/citations?user=4HAFFT0AAAAJ&hl=es&oi=ao" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate'></i> Perfil ResearchGate: <a href="https://www.researchgate.net/profile/Dynhora-Ramirez-Ochoa" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="Archivos/perfil-unico(Dynhora-Ramirez).pdf" target="_blank">Descargar</a></p>
                        <p>Línea Principal: Tecnologías Inmersivas y Aplicaciones Móviles</p>
                    </div>
                </div>
                
                <div class="member-card">
                    <img src="img/Ibet.png" alt="Foto de Miembro">
                    <div class="member-name-link">
                        <h3>MA. Orozco Chavira Ibet Esther</h3>
                    </div>
                    <div class="member-details">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google'></i> Perfil Google: <a href="https://scholar.google.com/citations?user=EJEMPLO_IBET" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate'></i> Perfil ResearchGate: <a href="https://www.researchgate.net/profile/Ibet-Esther-Orozco-Chavira" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="archivos/cv-ibet.pdf" target="_blank">Descargar</a></p>
                        <p>Línea Principal: Optimización de Procesos y Data Analytics</p>
                    </div>
                </div>
                
                <div class="member-card">
                    <img src="img/Dafnis.png" alt="Foto de Miembro">
                    <div class="member-name-link">
                        <h3>Dr. Dafnis Cain Villagran Vizcarra</h3>
                    </div>
                    <div class="member-details">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google'></i> Perfil Google: <a href="https://scholar.google.com/citations?user=NuplKwwAAAAJ&hl=es&oi=ao" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate'></i> Perfil ResearchGate: <a href="https://www.researchgate.net/scientific-contributions/Dafnis-Cain-Villagran-Vizcarra-2302113618" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="Archivos/perfil-unico-Dafnis.pdf" target="_blank">Descargar</a></p>
                        <p>Línea Principal: Ingeniería de Software y Sistemas Embebidos</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="about" class="section">
        <div class="container">
            <h2>¿Qué es el Cuerpo Académico?</h2>
            <p>El Cuerpo Académico (CA) es un grupo de profesores de tiempo completo... (tu contenido)</p>
        </div>
    </section>

    <section class="section bg-light">
        <div class="container">
            <h2>Organigrama</h2>
            <img class="Organigrama" src="img/orga-Ca_page-0001.jpg" style="max-width: 100%; height: auto;">
        </div>
    </section>

    <footer id="contacto">
        <h3>Compartiendo el Conocimiento!</h3>
        <div class="right">
            <div class="links">
                <a href="#">Política de Privacidad</a>
                <a href="#">Contacto</a>
            </div>
            <p>Copyright © 2025 Cuerpo Académico, Todos los Derechos Reservados.</p>
        </div>
    </footer>

    <script src="Script.js"></script>
    <script src="login.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. LÓGICA DE MIEMBROS (ACORDEÓN) ---
            const memberCards = document.querySelectorAll('.member-card');

            memberCards.forEach(card => {
                card.addEventListener('click', (e) => {
                    // Si el usuario hace clic en un link real dentro de los detalles, no cerrar.
                    if (e.target.tagName === 'A' && e.target.parentElement.tagName === 'P') return;

                    const details = card.querySelector('.member-details');
                    const isActive = details.classList.contains('active');

                    // Cerramos otros detalles abiertos
                    document.querySelectorAll('.member-details').forEach(d => {
                        d.classList.remove('active');
                    });

                    // Si no estaba activo, lo abrimos
                    if (!isActive) {
                        details.classList.add('active');
                    }
                });
            });

            // --- 2. LÓGICA DE BARRA DE NAVEGACIÓN (USUARIO) ---
            const authLinkContainer = document.getElementById('auth-link');

            const renderUserMenu = (name) => {
                const firstName = name ? name.split(' ')[0] : 'Usuario';
                authLinkContainer.innerHTML = `
                    <div class="profile-dropdown">
                        <button class="profile-button">Hola, ${firstName} ▼</button>
                        <div class="dropdown-content">
                            <a href="Perfil.html"><i class='bx bx-user'></i> Ver Perfil</a>
                            <a href="#" id="logout-btn-index"><i class='bx bx-log-out'></i> Cerrar Sesión</a>
                        </div>
                    </div>
                `;

                document.getElementById('logout-btn-index').onclick = async (e) => {
                    e.preventDefault();
                    await fetch('/api/logout', { method: 'POST' });
                    window.location.reload();
                };

                const btn = authLinkContainer.querySelector('.profile-button');
                const dropdown = authLinkContainer.querySelector('.dropdown-content');
                btn.onclick = (e) => {
                    e.stopPropagation();
                    dropdown.classList.toggle('show-dropdown');
                };
            };

            fetch('/api/usuario/perfil')
                .then(res => res.json())
                .then(data => {
                    if (data.success) renderUserMenu(data.user.nombre);
                })
                .catch(() => {});

            window.onclick = () => {
                const drop = document.querySelector('.dropdown-content.show-dropdown');
                if (drop) drop.classList.remove('show-dropdown');
            };
        });
    </script>
</body>
</html>