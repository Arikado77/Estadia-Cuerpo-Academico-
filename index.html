<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="CA.css">
    <title>Cuerpo Académico</title>
</head>

<body>

    <nav>
        <div class="brand">
            <img src="img/Gemini_Generated_Image_6fk5kt6fk5kt6fk5.png" alt="">
            <a class="logo">CA-TICO</a>
        </div>
        <div class="links">
            <a href="#">Inicio</a>
            <a href="#que-es" onclick="window.location.href='CA.html'">¿Qué es CA?</a>
            <a href="#lineas" onclick="window.location.href='Conocimiento.html'">Líneas de Conocimiento</a>
            <a href="#noticias" onclick="window.location.href='Noticias.html'">Noticias y mas</a>
            <a href="#Sitios" onclick="window.location.href='Sitios.html'">Proyectos</a>
        </div>
        <div class="nav-bar">
            <div id="auth-link">
                <a href="login.html" class="login-button">Iniciar Sesión</a>
            </div>
        </div>
    </nav>

    <header>
        <div class="left">
            <h1>Bienvenido a <span><br>TECNOLOGÍAS INMERSIVAS Y CREATIVIDAD PARA LA OPTIMIZACIÓN</span></h1>
            <p>Un espacio de investigación, colaboración y difusión del conocimiento.<br>Explora nuestras líneas de investigación, proyectos y noticias.</p>
        </div>

        <img src="img/Gemini_Generated_Image_6fk5kt6fk5kt6fk5.png" alt="Cuerpo Académico">

    </header>

    <section id="members" class="section bg-light">
        <div class="container">
            <h2>Miembros</h2>
            <div class="members-grid">
                
                <div class="member-card">
                    <img src="img/Dynhora.png" alt="Foto de Miembro">
                    <a target="_blank" class="member-name-link">
                        <h3>Dr. Dynhora Danheyda Ramírez Ochoa</h3>
                    </a>
                    <div class="member-details" id="details-dynhora">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google' ></i> Perfil Google: <a href="https://scholar.google.com/citations?user=4HAFFT0AAAAJ&hl=es&oi=ao" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate' ></i> Perfil ResearchGate: <a href="https://www.researchgate.net/profile/Dynhora-Ramirez-Ochoa" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="Archivos/perfil-unico(Dynhora-Ramirez).pdf" target="_blank">Descargar</a></p>
                        <p></i> Línea Principal: Tecnologías Inmersivas y Aplicaciones Móviles</p>
                    </div>
                </div>
                
                <div class="member-card">
                    <img src="img/Ibet.png" alt="Foto de Miembro">
                    <a target="_blank" class="member-name-link">
                        <h3>MA. Orozco Chavira Ibet Esther</h3>
                    </a>
                    <div class="member-details" id="details-ibet">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google' ></i> Perfil Google: <a href="https://scholar.google.com/citations?user=EJEMPLO_IBET" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate' ></i> Perfil ResearchGate: <a href="https://www.researchgate.net/profile/Ibet-Esther-Orozco-Chavira" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="archivos/cv-ibet.pdf" target="_blank">Descargar</a></p>
                        <p></i> Línea Principal: Optimización de Procesos y Data Analytics</p>
                    </div>
                </div>
                
                <div class="member-card">
                    <img src="img/Dafnis.png" alt="Foto de Miembro">
                    <a target="_blank" class="member-name-link">
                        <h3>Dr. Dafnis Cain Villagran Vizcarra</h3>
                    </a>
                    <div class="member-details" id="details-dafnis">
                        <hr>
                        <h4>Información de Contacto y Perfil</h4>
                        <p><i class='bx bxl-google' ></i> Perfil Google: <a href="https://scholar.google.com/citations?user=NuplKwwAAAAJ&hl=es&oi=ao" target="_blank">Ver</a></p>
                        <p><i class='bx bxl-researchgate' ></i> Perfil ResearchGate: <a href="https://www.researchgate.net/scientific-contributions/Dafnis-Cain-Villagran-Vizcarra-2302113618" target="_blank">Ver</a></p>
                        <p><i class='bx bxs-file-pdf'></i> Currículum (PDF): <a href="Archivos/perfil-unico-Dafnis.pdf" target="_blank">Descargar</a></p>
                        <p></i> Línea Principal: Ingeniería de Software y Sistemas Embebidos</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="about" class="section">
        <div class="container">
                <h2>¿Qué es el Cuerpo Académico?</h2>
                <p>El Cuerpo Académico (CA) es un grupo de profesores de tiempo completo que
                    comparten varias líneas innovadoras de investigación aplicada o desarrollo
                    tecnológico las cuales se orientan principalmente a la asimilación,
                    desarrollo, transferencia y mejora de las tecnologías y procesos para
                    apoyar al sector productivo y de servicios de una región en particular,
                    así como también atender los programas educativos de la institución de
                    origen y comparten objetivos y metas académicas comunes.
                    <br><br>
                    El CA se crea a partir del apoyo del PROMEP (Programa de mejoramiento del
                    profesorado) el cual tiene como objetivo principal lograr la superación
                    del profesorado y la consolidación de los Cuerpos Académicos de las
                    instituciones de educación superior para elevar la calidad de la educación
                    en el país. Para alcanzar este objetivo la Secretaría de Educación Pública,
                    a través de la Subsecretaría de Educación Superior ha emprendido en el
                    marco del PROMEP varias acciones enfocadas a promover que los profesores
                    de tiempo completo se integren en Cuerpos Académicos y con ello sustentar
                    la formación de profesionales de buena calidad, responsables y
                    competitivos.
            </p>
        </div>
    </section>

    <section id="members" class="section bg-light">

        <div class="container">
                <h2>Organigrama</h2>
                <img class="Organigrama" src="img/orga-Ca_page-0001.jpg">
            </div>
        
    </section>

    <footer id="contacto">
        <h3>Compartiendo el Conocimiento!</h3>
        <div class="right">
            <div class="links">
                <a href="#">Política de Privacidad</a>
                <a href="#">Colaboraciones</a>
                <a href="#">Patrocinadores</a>
                <a href="#">Contacto</a>
            </div>
            <p>Copyright © 2025 Cuerpo Académico, Todos los Derechos Reservados.</p>
        </div>
    </footer>

    <script src="Script.js"></script>
    <script src="login.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', () => {

                // --- LÓGICA DE ACTUALIZACIÓN DE ESTADO DE AUTENTICACIÓN ---
                const authLinkContainer = document.getElementById('auth-link');
                
                // Función para crear el menú de perfil (Manteniendo tu estructura)
                const createProfileDropdown = (userEmail) => {
                    // Adaptamos tu lógica existente para construir el menú de perfil
                    
                    // Contenedor principal del menú de perfil
                    const profileDropdown = document.createElement('div');
                    profileDropdown.className = 'profile-dropdown';
                    
                    // Botón de saludo (ej. Hola, Carlos ↓)
                    const profileButton = document.createElement('button');
                    profileButton.className = 'profile-button';
                    const userName = userEmail ? userEmail.split('@')[0] : 'Usuario';
                    profileButton.textContent = `Hola, ${userName} ↓`;
                    
                    // Contenido del menú desplegable
                    const dropdownContent = document.createElement('div');
                    dropdownContent.className = 'dropdown-content';
                    
                    // Enlace para ver el perfil
                    const viewProfileLink = document.createElement('a');
                    viewProfileLink.href = 'Perfil.html';
                    viewProfileLink.textContent = 'Ver Perfil';
                    
                    // Botón de Cerrar Sesión (Usaremos fetch para la ruta /api/logout)
                    const logoutButton = document.createElement('button');
                    logoutButton.textContent = 'Cerrar Sesión';
                    logoutButton.addEventListener('click', async () => {
                        try {
                            // Llama a la ruta de logout en el servidor
                            await fetch('/api/logout', { method: 'POST' });
                            // Limpia y recarga la página
                            window.location.reload(); 
                        } catch (error) {
                            console.error('Fallo al cerrar sesión:', error);
                            alert('Fallo al contactar al servidor para cerrar sesión.');
                        }
                    });
                    
                    // Ensamblar el menú
                    dropdownContent.appendChild(viewProfileLink);
                    dropdownContent.appendChild(logoutButton);
                    profileDropdown.appendChild(profileButton);
                    profileDropdown.appendChild(dropdownContent);

                    // Reemplazar el botón "Iniciar Sesión" con el menú de perfil
                    authLinkContainer.innerHTML = '';
                    authLinkContainer.appendChild(profileDropdown);

                    // Lógica para mostrar/ocultar el dropdown
                    profileButton.addEventListener('click', () => {
                        dropdownContent.classList.toggle('show-dropdown');
                    });

                    // Cerrar el dropdown al hacer clic fuera
                    window.onclick = function(event) {
                        if (!event.target.matches('.profile-button')) {
                            const dropdowns = document.getElementsByClassName('dropdown-content');
                            for (let i = 0; i < dropdowns.length; i++) {
                                const openDropdown = dropdowns[i];
                                if (openDropdown.classList.contains('show-dropdown')) {
                                    openDropdown.classList.remove('show-dropdown');
                                }
                            }
                        }
                    };
                };
                
                // 1. CONSULTAR AL SERVIDOR EL ESTADO DE AUTENTICACIÓN
                if (authLinkContainer) {
                    fetch('/api/status')
                        .then(res => {
                            if (!res.ok) {
                                throw new Error('Respuesta de red no exitosa');
                            }
                            return res.json();
                        })
                        .then(data => {
                            if (data.isAuthenticated) {
                                // *** USUARIO LOGUEADO: Mostrar menú de Perfil ***
                                createProfileDropdown(data.userEmail); // Asume que el servidor devuelve userEmail
                            } else {
                                // *** USUARIO DESLOGUEADO: Mostrar Iniciar Sesión ***
                                // Esto es el valor por defecto en tu HTML, pero lo aseguramos:
                                authLinkContainer.innerHTML = '<a href="login.html" class="login-button">Iniciar Sesión</a>';
                            }
                        })
                        .catch(error => {
                            console.error('Fallo al verificar la sesión con el servidor:', error);
                            // Si la red falla, dejamos el estado de "Iniciar Sesión"
                            authLinkContainer.innerHTML = '<a href="login.html" class="login-button">Iniciar Sesión</a>';
                        });
                }

                // --- CÓDIGO DE LAS TARJETAS DE MIEMBROS (NO MODIFICADO) ---
                // (Asegúrate de pegar aquí la lógica de expansión de tarjetas si estaba en este bloque)
                const memberCards = document.querySelectorAll('.member-card');
                const allDetails = document.querySelectorAll('.member-details');

                memberCards.forEach(card => {
                    card.addEventListener('click', (event) => {
                        if (event.target.closest('a')) {
                            return;
                        }
                        allDetails.forEach(details => {
                            details.classList.toggle('expanded');
                        });
                    });
                });

                // --- CÓDIGO DE ANIMACIÓN DE INTRO (NO MODIFICADO) ---
                // (Asegúrate de pegar aquí tu lógica de intro screen si estaba en este bloque)
                // const introScreen = document.getElementById('intro-screen'); ...
            });
        </script>

    </body>

</html>